<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Yocto BTC Scanner</title>
  <script src="https://unpkg.com/bitcoinjs-lib@6.1.0/dist/bitcoinjs-lib.min.js"></script>
  <style>
    body { background: #0f0f0f; color: #00ffcc; font-family: monospace; padding: 20px; }
    textarea, button { width: 100%; padding: 10px; margin-top: 10px; background: #111; color: #0f0; border: 1px solid #0f0; }
    .result { margin-top: 20px; white-space: pre-wrap; border: 1px dashed #0f0; padding: 10px; }
  </style>
</head>
<body>
  <h2>🧪 Pemindai Kunci Pribadi Bitcoin - Yocto</h2>
  <p>Masukkan 64 digit HEX Private Key (1 per baris):</p>
  <textarea id="input" rows="10" placeholder="contoh: 0000000000000000000000000000000000000000000000000000000000000001"></textarea>
  <button onclick="scan()">Pindai</button>
  <div id="output" class="result">⏳ Menunggu input...</div>

  <script>
    async function scan() {
      const lines = document.getElementById('input').value.trim().split(/\r?\n/).filter(l => l.length === 64);
      const output = document.getElementById('output');
      output.textContent = '⏳ Memproses...';
      let results = [];

      for (const hex of lines) {
        try {
          const keyPair = bitcoin.ECPair.fromPrivateKey(Buffer.from(hex, 'hex'));
          const { address } = bitcoin.payments.p2pkh({ pubkey: keyPair.publicKey });
          const balance = await fetchBalance(address);
          results.push(`🔑 ${hex}\n🏷 ${address}\n💰 ${balance}\n`);
        } catch (e) {
          results.push(`❌ Gagal memproses key: ${hex}`);
        }
      }

      output.textContent = results.join('\n---\n');
    }

    async function fetchBalance(address) {
      try {
        const res = await fetch(`https://blockstream.info/api/address/${address}`);
        const json = await res.json();
        const sats = json.chain_stats.funded_txo_sum - json.chain_stats.spent_txo_sum;
        return (sats / 1e8).toFixed(8) + ' BTC';
      } catch {
        return '⚠️ Error mengambil saldo';
      }
    }
  </script>
</body>
</html>
